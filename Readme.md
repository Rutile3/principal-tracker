# 楽天証券CSV 取得額（元本）遷移ビューア

楽天証券でダウンロードできる **国内株式の取引履歴CSV** から、  
株式投資の **取得額（投下元本）の時系列遷移** を算出・可視化するためのWebツールです。

ブラウザ上で完結する静的サイトとして構成しており、  
**GitHub Pages** でホスティングするだけで利用できます。

> ⚠️ **このツールは現在開発途中です。**  
> 機能は予告なく変更される可能性があり、正常に動作する保証はありません。  
> ご利用は自己責任でお願いいたします。  

---

## 🧩 主な機能

- CSVファイルをブラウザで読み込み、取引履歴を解析
- 「買付」で元本に加算、「売付」で総平均法に基づき元本から減算
- 取引ごとのログと、日次ベースの元本推移をグラフ表示（Chart.js）
- 取得額の要約表示（開始日／最終日／現在値／ピーク値）
- 日次元本推移データをCSVとして書き出し可能

---

## 🛠 使用方法

1. このリポジトリをクローン、またはZIPダウンロードします。  

    ```bash
    git clone https://github.com/yourname/principal-tracker.git
    ````

2. 以下の3ファイルをGitHubリポジトリのルートディレクトリに配置します。

    ```directory
    index.html
    styles.css
    app.js
    ```

3. GitHub Pages を **mainブランチ / root** に設定して有効化します。
4. 公開されたURLにアクセスし、楽天証券の取引履歴CSVを選択して「読み込む」をクリック。

---

## 💾 対応フォーマット

楽天証券「国内株式」取引履歴CSVをそのまま読み込めます。
以下のようなカラムを自動判定します（全角・半角どちらも対応）：

| 種類     | 想定カラム名                                   |
| -------- | ---------------------------------------------- |
| 日付     | 受渡日 または 約定日                           |
| 売買区分 | 買付 / 売付                                    |
| 数量     | 数量［株］                                     |
| 金額     | 受渡金額［円］                                 |
| 参考     | 手数料［円］、税金等［円］、銘柄コード、銘柄名 |

---

## 📈 計算ロジック

- **買付**：受渡金額（手数料・税を含む）を元本に加算
- **売付**：保有数量の総平均単価 × 売却数量を元本から減算
- 同一銘柄の平均取得単価は都度更新（**総平均法**）
- グラフは取引日の推移を日次ベースで描画

---

## 🖼 ファイル構成

```directory
├── index.html   # メインページ（Bootstrap & Chart.js）
├── styles.css   # スタイル定義
└── app.js       # CSV解析・計算・描画ロジック
```

---

## 📄 ライセンス

MIT License

---

## 💬 開発メモ

- 総平均法以外（FIFO法・移動平均法など）の切り替え機能を追加予定
- 銘柄別元本や配当入出金反映にも対応予定
